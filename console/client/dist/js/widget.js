/*! For license information please see widget.js.LICENSE.txt */
!function(){var e={"../../node_modules/@babel/runtime/regenerator/index.js":function(e,t,n){e.exports=n("../../node_modules/regenerator-runtime/runtime.js")},"./js/com/genb/base/controller/ObservableController.js":function(e,t,n){"use strict";n.r(t),n.d(t,{ObservableController:function(){return s}});var r=n("../../node_modules/@babel/runtime/helpers/esm/classCallCheck.js"),i=n("../../node_modules/@babel/runtime/helpers/esm/createClass.js"),o=n("./js/com/genb/base/service/EventEmitter.js"),s=function(){function e(){(0,r.default)(this,e),this.observable=new o.EventEmitter}return(0,i.default)(e,[{key:"addListener",value:function(e,t){this.observable.addListener(e,t)}},{key:"removeListener",value:function(e,t){this.observable.removeListener(e,t)}},{key:"emit",value:function(e){for(var t,n=arguments.length,r=new Array(n>1?n-1:0),i=1;i<n;i++)r[i-1]=arguments[i];(t=this.observable).emit.apply(t,[e].concat(r))}}]),e}()},"./js/com/genb/base/controller/UIView.js":function(e,t,n){"use strict";n.r(t),n.d(t,{UIView:function(){return d}});var r=n("../../node_modules/@babel/runtime/helpers/esm/classCallCheck.js"),i=n("../../node_modules/@babel/runtime/helpers/esm/createClass.js"),o=n("../../node_modules/@babel/runtime/helpers/esm/inherits.js"),s=n("../../node_modules/@babel/runtime/helpers/esm/possibleConstructorReturn.js"),a=n("../../node_modules/@babel/runtime/helpers/esm/getPrototypeOf.js"),u=n("./js/com/genb/base/controller/ObservableController.js"),c=n("./js/com/genb/base/utils/HTMLUtils.js");function l(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=(0,a.default)(e);if(t){var i=(0,a.default)(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return(0,s.default)(this,n)}}var d=function(e){(0,o.default)(n,e);var t=l(n);function n(){return(0,r.default)(this,n),t.apply(this,arguments)}return(0,i.default)(n,[{key:"uiGet",value:function(e){return c.HTMLUtils.get(e)}},{key:"uiExists",value:function(e){return c.HTMLUtils.exists(e)}},{key:"uiArray",value:function(e){return c.HTMLUtils.array(e)}},{key:"removeListeners",value:function(e){var t=this.uiGet(e),n=t.cloneNode(!0);t.parentNode.replaceChild(n,t)}}]),n}(u.ObservableController)},"./js/com/genb/base/service/EventEmitter.js":function(e,t,n){"use strict";n.r(t),n.d(t,{EventEmitter:function(){return o}});var r=n("../../node_modules/@babel/runtime/helpers/esm/classCallCheck.js"),i=n("../../node_modules/@babel/runtime/helpers/esm/createClass.js"),o=function(){function e(){(0,r.default)(this,e),this.listeners=new Map}return(0,i.default)(e,[{key:"addListener",value:function(e,t){this.listeners.has(e)||this.listeners.set(e,[]),this.listeners.get(e).push(t)}},{key:"removeListener",value:function(e,t){var n,r=this,i=this.listeners.get(e);return!!(i&&i.length&&(n=i.reduce((function(e,n,i){return r.isFunction(n)&&n===t?e=i:e}),-1))>-1)&&(i.splice(n,1),this.listeners.set(e,i),!0)}},{key:"emit",value:function(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];var i=this.listeners.get(e);return!(!i||!i.length)&&(i.forEach((function(e){e.apply(void 0,n)})),!0)}},{key:"isFunction",value:function(e){return"function"==typeof e||!1}}]),e}()},"./js/com/genb/base/service/FormService.js":function(e,t,n){"use strict";n.r(t),n.d(t,{FormService:function(){return h}});var r=n("../../node_modules/@babel/runtime/helpers/esm/slicedToArray.js"),i=n("../../node_modules/@babel/runtime/helpers/esm/classCallCheck.js"),o=n("../../node_modules/@babel/runtime/helpers/esm/createClass.js"),s=n("../../node_modules/@babel/runtime/helpers/esm/inherits.js"),a=n("../../node_modules/@babel/runtime/helpers/esm/possibleConstructorReturn.js"),u=n("../../node_modules/@babel/runtime/helpers/esm/getPrototypeOf.js"),c=n("./js/com/genb/base/service/EventEmitter.js"),l=n("../../node_modules/js-cookie/src/js.cookie.js"),d=n.n(l);function f(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=(0,u.default)(e);if(t){var i=(0,u.default)(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return(0,a.default)(this,n)}}var h=function(e){(0,s.default)(n,e);var t=f(n);function n(){return(0,i.default)(this,n),t.apply(this,arguments)}return(0,o.default)(n,[{key:"getAsXMLHttpRequest",value:function(e){return this.sendAsXMLHttpRequest("GET",[],e)}},{key:"postAsXMLHttpRequest",value:function(e,t){return this.sendAsXMLHttpRequest("POST",e,t)}},{key:"sendAsXMLHttpRequest",value:function(e,t,n){for(var i=new FormData,o=0,s=Object.entries(t);o<s.length;o++){var a=(0,r.default)(s[o],2),u=a[0],c=a[1];i.append(u,c)}return new Promise((function(t,r){var o=new XMLHttpRequest;o.open(e,n,!0),o.addEventListener("load",(function(){[200,201].includes(o.status)&&t(o.responseText),r(o.responseText)}));var s=d().get("csrftoken");"undefined"!==s&&o.setRequestHeader("X-CSRFToken",s),o.send(i)}))}},{key:"sendAsXMLHttpFormEncodedRequest",value:function(e,t){var n="";return e.forEach((function(e){n="".concat(n).concat(e.name,"=").concat(e.value,"&")})),new Promise((function(e){var r=new XMLHttpRequest;r.open("POST",t,!0),r.addEventListener("load",(function(){e(r.responseText)})),r.setRequestHeader("Content-Type","application/x-www-form-urlencoded"),r.send(n)}))}},{key:"sendAsForm",value:function(e,t){var n='<form id="__form__" action=\''.concat(t,'\' method="POST" enctype="multipart/form-data">');e.forEach((function(e){n+='<input type="hidden" name="'.concat(e.name,"\" value='").concat(e.value,"'>")})),n+="</form>",document.body.insertAdjacentHTML("beforeend",n),document.getElementById("__form__").submit()}}]),n}(c.EventEmitter)},"./js/com/genb/base/utils/BaseUtils.js":function(e,t,n){"use strict";n.r(t),n.d(t,{BaseUtils:function(){return o}});var r=n("../../node_modules/@babel/runtime/helpers/esm/classCallCheck.js"),i=n("../../node_modules/@babel/runtime/helpers/esm/createClass.js"),o=function(){function e(){(0,r.default)(this,e)}return(0,i.default)(e,[{key:"log",value:function(e){console.log(e)}}],[{key:"isObjectDefined",value:function(e){try{return null!=e}catch(e){return!1}}},{key:"isPage",value:function(t){var n=document.querySelector("meta[property='emd:page']");return!!e.isObjectDefined(n)&&n.attributes.content.value===t}},{key:"hostname",get:function(){return window.location.hostname}}]),e}()},"./js/com/genb/base/utils/HTMLUtils.js":function(e,t,n){"use strict";n.r(t),n.d(t,{HTMLUtils:function(){return s}});var r=n("../../node_modules/@babel/runtime/helpers/esm/classCallCheck.js"),i=n("../../node_modules/@babel/runtime/helpers/esm/createClass.js"),o=n("./js/com/genb/base/utils/BaseUtils.js"),s=function(){function e(){(0,r.default)(this,e)}return(0,i.default)(e,null,[{key:"get",value:function(e){var t=document.querySelector(e);return o.BaseUtils.isObjectDefined(t)||console.warn('HTMLUtils::get Element "'.concat(e,'" is not defined.')),t}},{key:"exists",value:function(e){var t=document.querySelector(e);return o.BaseUtils.isObjectDefined(t)}},{key:"getForm",value:function(){return e.get("form")}},{key:"getValueByName",value:function(e){return this.get('*[name="'.concat(e,'"]')).value}},{key:"getInputByName",value:function(e){return this.get('input[name="'.concat(e,'"]'))}},{key:"getInputByClassName",value:function(e){return this.get("input.".concat(e))}},{key:"getSelectByName",value:function(e){return this.get('select[name="'.concat(e,'"]'))}},{key:"getSelectByClassName",value:function(e){return this.get("select.".concat(e))}},{key:"getInputValueByName",value:function(e){return this.getInputByName(e).value}},{key:"getCheckboxValueByName",value:function(e){return this.getInputByName(e).checked?"true":"false"}},{key:"setInputValueByName",value:function(e,t){var n=this.getInputByName(e);o.BaseUtils.isObjectDefined(n)?n.value=t:console.warn("setInputValueByName:: Element '".concat(e,"' is not defined."))}},{key:"getSelectValueByName",value:function(e){return this.getSelectByName(e).value}},{key:"getSelectTextByName",value:function(e){return this.getSelectByName(e).selectedOptions[0].text}},{key:"setSelectValueByName",value:function(e,t){var n=this.getSelectByName(e);o.BaseUtils.isObjectDefined(n)?n.value=t:console.warn("setSelectValueByName:: Element '".concat(e,"' is not defined."))}},{key:"getInputValueByClassName",value:function(e){return this.getInputByClassName(e).value}},{key:"getSelectValueByClassName",value:function(e){return this.getSelectByClassName(e).value}},{key:"list",value:function(e){var t=document.querySelectorAll(e);return o.BaseUtils.isObjectDefined(t)||console.warn('Elements "'.concat(e,'" are not defined.')),t}},{key:"array",value:function(t){return Array.from(e.list(t))}},{key:"firstToHTMLElement",value:function(e){if(e.length>0)return e[0]}},{key:"activate",value:function(t){var n=e.get(t);e.activateElement(n)}},{key:"activateElement",value:function(e){e.classList.add("js-active")}},{key:"deactivate",value:function(t){var n=e.get(t);e.deactivateElement(n)}},{key:"deactivateElement",value:function(e){e.classList.remove("js-active")}},{key:"copyToClipboard",value:function(e){function t(t){t.clipboardData.setData("text/html",e),t.clipboardData.setData("text/plain",e),t.preventDefault()}document.addEventListener("copy",t),document.execCommand("copy"),document.removeEventListener("copy",t)}},{key:"decodeHtml",value:function(e){var t=document.createElement("textarea");return t.innerHTML=e,t.value}},{key:"removeAllEventListeners",value:function(e){var t=document.querySelector(e),n=t.cloneNode(t);t.parentNode.replaceChild(n,t)}},{key:"removeAllEventListenersFromElement",value:function(e){var t=e.cloneNode(e);e.parentNode.replaceChild(t,e)}},{key:"setCookie",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:7,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"/",i=new Date(Date.now()+864e5*n).toUTCString();document.cookie=e+"="+encodeURIComponent(t)+"; expires="+i+"; path="+r}},{key:"getCookie",value:function(e){return document.cookie.split("; ").reduce((function(t,n){var r=n.split("=");return r[0]===e?decodeURIComponent(r[1]):t}),"")}},{key:"deleteCookie",value:function(e,t){this.setCookie(e,"",-1,t)}}]),e}()},"./js/com/genb/base/utils/StringUtils.js":function(e,t,n){"use strict";n.r(t),n.d(t,{StringUtils:function(){return s}});var r=n("../../node_modules/@babel/runtime/helpers/esm/classCallCheck.js"),i=n("../../node_modules/@babel/runtime/helpers/esm/createClass.js"),o=n("../../node_modules/@babel/runtime/helpers/esm/defineProperty.js"),s=function(){function e(){(0,r.default)(this,e)}return(0,i.default)(e,null,[{key:"isDefined",value:function(e){return"string"==typeof e}},{key:"isEmpty",value:function(e){return"string"==typeof e&&0===e.length}},{key:"isNotEmpty",value:function(e){return!this.isEmpty(e)}},{key:"equals",value:function(e,t){return e===t}},{key:"getUID",value:function(){return(new Date).getTime().toString()}},{key:"isEmailValid",value:function(e){return/^[a-zA-Z0-9.!#$%&'*+\/=?^_`{|}~-]+@[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?(?:\.[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?)*$/.test(e)}},{key:"isIpAddressValid",value:function(e){return/^(25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)\.(25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)\.(25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)\.(25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)$/.test(e)}},{key:"isUrlValid",value:function(e){return/((http|ftp|https):\/\/)?[\w-]+(\.[\w-]+)+([\w.,@?^=%&amp;:\/~+#-]*[\w@?^=%&amp;\/~+#-])?/.test(e)}},{key:"isNumber",value:function(e){return/^-?\d*[\.]?\d+$/.test(e)}},{key:"isCurrency",value:function(e){return/(?=.)^\$?(([1-9][0-9]{0,2}(,[0-9]{3})*)|[0-9]+)?(\.[0-9]{1,2})?$/.test(e)}},{key:"extractFormBuilderFormFieldType",value:function(e){return e.split(" ")[0].split("-")[1]}},{key:"extractFileNameFromPath",value:function(e){return e.replace(/^.*[\\\/]/,"")}},{key:"capitalize",value:function(e){return e.replace(/(^| )(\w)/g,(function(e){return e.toUpperCase()}))}},{key:"toBoolean",value:function(e){return/(true|True|1)/g.test(e)}},{key:"stripFromQuotes",value:function(t){var n=/(['"]?)(.*)\1/.exec(t);return n.length>2?n[2]:e.EMPTY}},{key:"hashCode",value:function(e){return e.split("").reduce((function(e,t){return(e<<5)-e+t.charCodeAt(0)}),0)}}]),e}();(0,o.default)(s,"EMPTY",""),(0,o.default)(s,"URL_TARGET_BLANK","_blank"),(0,o.default)(s,"URL_TARGET_SELF","_self")},"./js/com/quickhellou/base/model/ApplicationSettings.js":function(e,t,n){"use strict";n.r(t),n.d(t,{ApplicationSettings:function(){return o}});var r=n("../../node_modules/@babel/runtime/helpers/esm/classCallCheck.js"),i=n("../../node_modules/@babel/runtime/helpers/esm/createClass.js"),o=function(){function e(t){(0,r.default)(this,e),this.objs=JSON.parse(t),this.videoAppUrl=this.getValue("video_app_url"),this.consoleAppUrl=this.getValue("console_app_url"),this.webSocketServiceUrl=this.getValue("ws_service_url"),this.adminEmailAddress=this.getValue("admin_email_address")}return(0,i.default)(e,[{key:"getValue",value:function(e){return this.objs.filter((function(t){return t.property===e}))[0].value}}]),e}()},"./js/com/quickhellou/base/model/ComSessionStatus.js":function(e,t,n){"use strict";n.r(t),n.d(t,{ComSessionStatus:function(){return i}});var r=n("../../node_modules/@babel/runtime/helpers/esm/classCallCheck.js"),i=function e(){(0,r.default)(this,e)};i.STATUS_PENDING=1,i.STATUS_ENQUEUED=2,i.STATUS_MISSED=3,i.STATUS_CANCELLED=4,i.STATUS_REJECTED=5,i.STATUS_ACCEPTED=6,i.STATUS_COMPLETED=7},"./js/com/quickhellou/base/model/UserType.js":function(e,t,n){"use strict";n.r(t),n.d(t,{UserType:function(){return i}});var r=n("../../node_modules/@babel/runtime/helpers/esm/classCallCheck.js"),i=function e(){(0,r.default)(this,e)};i.ADMIN="admin",i.GUEST="guest"},"./js/com/quickhellou/base/services/ApiService.js":function(e,t,n){"use strict";n.r(t),n.d(t,{ApiService:function(){return d}});var r=n("../../node_modules/@babel/runtime/helpers/esm/classCallCheck.js"),i=n("../../node_modules/@babel/runtime/helpers/esm/createClass.js"),o=n("../../node_modules/@babel/runtime/helpers/esm/inherits.js"),s=n("../../node_modules/@babel/runtime/helpers/esm/possibleConstructorReturn.js"),a=n("../../node_modules/@babel/runtime/helpers/esm/getPrototypeOf.js"),u=n("./js/com/genb/base/service/FormService.js"),c=n("./js/com/quickhellou/base/model/ComSessionStatus.js");function l(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=(0,a.default)(e);if(t){var i=(0,a.default)(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return(0,s.default)(this,n)}}var d=function(e){(0,o.default)(n,e);var t=l(n);function n(e){var i;return(0,r.default)(this,n),(i=t.call(this)).baseUrl=e,i}return(0,i.default)(n,[{key:"getCurrentUser",value:function(){return this.getJson("".concat(this.baseUrl,"/api/users/current/"))}},{key:"getSettings",value:function(){return this.getJson("".concat(this.baseUrl,"/api/settings/"))}},{key:"getUserById",value:function(e){return this.getJson("".concat(this.baseUrl,"/api/users/").concat(e,"/"))}},{key:"getWidgetById",value:function(e){return this.getJson("".concat(this.baseUrl,"/api/widgets/").concat(e,"/"))}},{key:"getCommunicationRecord",value:function(e){return this.getJson("".concat(this.baseUrl,"/api/communications/").concat(e,"/"))}},{key:"getJson",value:function(e){return this.getAsXMLHttpRequest("".concat(e,"?format=json"))}},{key:"createCall",value:function(e,t,n){var r={caller_name:e,caller_id:t,widget_uuid:n};return this.postAsXMLHttpRequest(r,"".concat(this.baseUrl,"/api/communications/"))}},{key:"rateComSession",value:function(e,t){return this.getAsXMLHttpRequest("".concat(this.baseUrl,"/api/comSessions/rate/").concat(e,"/").concat(t))}},{key:"cancelCall",value:function(e){return this.getAsXMLHttpRequest("".concat(this.baseUrl,"/api/communications/cancel/").concat(e,"/"))}},{key:"getUuid",value:function(e){return this.getAsXMLHttpRequest("".concat(this.baseUrl,"/api/comSessions/room-uuid/").concat(e))}},{key:"setComSessionAsAccepted",value:function(e){return this.setComSessionStatus(e,c.ComSessionStatus.STATUS_ACCEPTED)}},{key:"setComSessionAsRejected",value:function(e){return this.setComSessionStatus(e,c.ComSessionStatus.STATUS_REJECTED)}},{key:"setComSessionAsCancelled",value:function(e){return this.setComSessionStatus(e,c.ComSessionStatus.STATUS_CANCELLED)}},{key:"setComSessionAsCompleted",value:function(e){return this.setComSessionStatus(e,c.ComSessionStatus.STATUS_COMPLETED)}},{key:"setComSessionAsEnqueued",value:function(e){return this.setComSessionStatus(e,c.ComSessionStatus.STATUS_ENQUEUED)}},{key:"setComSessionStatus",value:function(e,t){return this.getAsXMLHttpRequest("".concat(this.baseUrl,"/api/comSessions/status/").concat(e,"/").concat(t))}},{key:"getPendingSessions",value:function(){return this.getAsXMLHttpRequest("".concat(this.baseUrl,"/api/comSessions/pending/1"))}}]),n}(u.FormService)},"./js/com/quickhellou/base/services/WebSocketService.js":function(e,t,n){"use strict";n.r(t),n.d(t,{WebSocketService:function(){return m}});var r=n("../../node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js"),i=n("../../node_modules/@babel/runtime/helpers/esm/classCallCheck.js"),o=n("../../node_modules/@babel/runtime/helpers/esm/createClass.js"),s=n("../../node_modules/@babel/runtime/helpers/esm/inherits.js"),a=n("../../node_modules/@babel/runtime/helpers/esm/possibleConstructorReturn.js"),u=n("../../node_modules/@babel/runtime/helpers/esm/getPrototypeOf.js"),c=n("../../node_modules/@babel/runtime/regenerator/index.js"),l=n.n(c),d=n("./js/com/genb/base/service/FormService.js"),f=n("./js/com/quickhellou/base/model/UserType.js");function h(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=(0,u.default)(e);if(t){var i=(0,u.default)(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return(0,a.default)(this,n)}}var m=function(e){(0,s.default)(a,e);var t,n=h(a);function a(e){var t;return(0,i.default)(this,a),(t=n.call(this)).url=e,t.isOpen=!1,t.openWebSocketConnection(),t}return(0,o.default)(a,[{key:"openWebSocketConnection",value:function(){var e=this;return new Promise((function(t){e.websocket=new WebSocket(e.url),e.websocket.onopen=function(){e.websocket.readyState===WebSocket.OPEN&&(e.isOpen=!0,e.attachWebSocketEventHandlers(),t())},e.websocket.onerror=function(t){3===t.currentTarget.readyState&&e.emit("connection_failure")}}))}},{key:"attachWebSocketEventHandlers",value:function(){var e=this;this.websocket.onmessage=function(t){e.handleMessageResponse(t.data)},this.websocket.onclose=function(){e.isOpen=!1},this.websocket.onerror=function(e){console.log("websocket error",e)}}},{key:"handleMessageResponse",value:function(e){if(""!==e){var t=JSON.parse(e);if(""===t.error){if(""!==t.msg){var n=JSON.parse(t.msg);switch(n.type){case"response":case"send":this.handleNamedResponse(n.body);break;case"list-clients":this.emit("listUsers",n.body);break;default:console.log("Response type not found.")}}}else this.emit("error",t.error)}}},{key:"handleNamedResponse",value:function(e){if(console.log("response",e),""!==e){var t="string"==typeof e?JSON.parse(e):e;switch(t.name){case"register":this.emit("register",t.status);break;case a.REQUEST_CALL:this.emit("callRequest",t.user,t.userId,t.widget);break;case a.CANCEL_CALL:this.emit("callCancel",t.recordId);break;case a.ACCEPT_CALL_REQUEST:this.emit("callAccepted",t.uuid);break;case a.REJECT_CALL_REQUEST:this.emit("callRejected");break;case a.SEND_COMMUNICATION_RECORD:this.emit("communicationRecord",t.record);break;default:console.log("No named response found.")}}}},{key:"registerList",value:function(e,t,n){var r=this;n.forEach((function(n){r.register(e,t,n.id)}))}},{key:"registerOperatorsList",value:function(e,t){this.registerList(e,f.UserType.ADMIN,t)}},{key:"deregisterList",value:function(e,t){var n=this;t.forEach((function(t){n.deregister(e,t.id)}))}},{key:"register",value:function(e,t,n){this.sendWebSocketMessage({cmd:"register",clientid:e,clienttype:t,roomid:n})}},{key:"registerOperator",value:function(e,t){this.register(e,f.UserType.ADMIN,t)}},{key:"registerGuest",value:function(e,t){this.register(e,f.UserType.GUEST,t)}},{key:"deregister",value:function(e,t){this.sendWebSocketMessage({cmd:"deregister",clientid:e,roomid:t})}},{key:"send",value:function(e,t){this.sendWebSocketMessage({cmd:a.SEND,clientid:e.uuid,roomid:e.client_board_id,msg:t})}},{key:"sendToOther",value:function(e,t,n,r){this.sendWebSocketMessage({cmd:"send-to-other",clientid:e,roomid:n,otherid:t,msg:r})}},{key:"listClients",value:function(e,t,n){this.sendWebSocketMessage({cmd:"list-clients",clientid:e,clienttype:t,roomid:n})}},{key:"listGuests",value:function(e,t){this.listClients(e,f.UserType.GUEST,t)}},{key:"listAdmins",value:function(e,t){this.listClients(e,f.UserType.ADMIN,t)}},{key:"requestCall",value:function(e,t,n,r){this.sendToOther(t,n,r,JSON.stringify({type:"send",body:{name:a.REQUEST_CALL,user:e,userId:t,widget:r}}))}},{key:"cancelCall",value:function(e,t,n,r){console.log("cancel call",e,t,n,r),this.sendToOther(t,n,r,JSON.stringify({type:"send",body:{name:a.CANCEL_CALL,recordId:e}}))}},{key:"acceptCallRequest",value:function(e,t,n,r){this.sendToOther(e,t,n,JSON.stringify({type:"send",body:{name:a.ACCEPT_CALL_REQUEST,uuid:r}}))}},{key:"rejectCallRequest",value:function(e,t,n){this.sendToOther(e,t,n,JSON.stringify({type:"send",body:{name:a.REJECT_CALL_REQUEST}}))}},{key:"passCommunicationRecord",value:function(e,t,n,r){this.sendToOther(e,t,n,JSON.stringify({type:"send",body:{name:a.SEND_COMMUNICATION_RECORD,record:r}}))}},{key:"sendWebSocketMessage",value:(t=(0,r.default)(l().mark((function e(t){var n,r=arguments;return l().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=!(r.length>1&&void 0!==r[1])||r[1],this.isOpen){e.next=4;break}return e.next=4,this.openWebSocketConnection();case 4:t.roomtype="client_board",t.persistant=String(n),this.websocket.send(JSON.stringify(t));case 7:case"end":return e.stop()}}),e,this)}))),function(e){return t.apply(this,arguments)})}]),a}(d.FormService);m.SEND="send",m.REQUEST_CALL="request-call",m.CANCEL_CALL="cancel-call",m.ACCEPT_CALL_REQUEST="accept-call-request",m.REJECT_CALL_REQUEST="reject-call-request",m.SEND_COMMUNICATION_RECORD="send-communication-record"},"./js/com/quickhellou/base/utils/QhUtils.js":function(e,t,n){"use strict";n.r(t),n.d(t,{QhUtils:function(){return a}});var r=n("../../node_modules/@babel/runtime/helpers/esm/classCallCheck.js"),i=n("../../node_modules/@babel/runtime/helpers/esm/createClass.js"),o=n("./js/com/genb/base/utils/BaseUtils.js"),s=n("./js/com/genb/base/utils/StringUtils.js"),a=function(){function e(){(0,r.default)(this,e)}return(0,i.default)(e,null,[{key:"isPage",value:function(e){var t=document.querySelector("meta[property='qh:view']");return!!o.BaseUtils.isObjectDefined(t)&&s.StringUtils.equals(t.attributes.content.value,e)}},{key:"getQhProperty",value:function(e){var t=document.querySelector("meta[property='qh:".concat(e,"']"));return o.BaseUtils.isObjectDefined(t)?t.attributes.content.value:(console.warn('QhUtils::getQhProperty No "'.concat(e,'" property found.')),null)}},{key:"getQhPropertyObject",value:function(t){return JSON.parse(e.getQhProperty(t))}},{key:"inTestMode",value:function(){return s.StringUtils.equals(e.getQhProperty("developerMode"),"test")}},{key:"createUserId",value:function(e){return"".concat(this.appUuid).concat(e)}},{key:"extractUserId",value:function(e){return e.split(this.appUuid)[1]}},{key:"appUuid",get:function(){return"faf8c9f7-99f7-4b9a-8ab8-c1ec416737e7"}}]),e}()},"./js/com/quickhellou/widget/BadgeView.js":function(e,t,n){"use strict";n.r(t),n.d(t,{BadgeView:function(){return m}});var r=n("../../node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js"),i=n("../../node_modules/@babel/runtime/helpers/esm/classCallCheck.js"),o=n("../../node_modules/@babel/runtime/helpers/esm/createClass.js"),s=n("../../node_modules/@babel/runtime/helpers/esm/inherits.js"),a=n("../../node_modules/@babel/runtime/helpers/esm/possibleConstructorReturn.js"),u=n("../../node_modules/@babel/runtime/helpers/esm/getPrototypeOf.js"),c=n("../../node_modules/@babel/runtime/regenerator/index.js"),l=n.n(c),d=n("./js/com/genb/base/controller/UIView.js"),f=n("./js/com/genb/base/utils/HTMLUtils.js");function h(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=(0,u.default)(e);if(t){var i=(0,u.default)(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return(0,a.default)(this,n)}}var m=function(e){(0,s.default)(a,e);var t,n=h(a);function a(e){var t;return(0,i.default)(this,a),(t=n.call(this)).service=e,t.element=window.parent.document.getElementById("qh_w_frame"),t}return(0,o.default)(a,[{key:"init",value:(t=(0,r.default)(l().mark((function e(){var t=this;return l().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:this.service.addListener("listUsers",(function(e){t.onListUsers(!!e.length)})),this.service.addListener("admin",(function(e){t.onAdmin(e)})),this.uiGet(".widget_base").addEventListener("click",(function(){t.emit("collapse")})),this.service.addListener("callRejected",(function(){t.onCallRejected()}));case 5:case"end":return e.stop()}}),e,this)}))),function(){return t.apply(this,arguments)})},{key:"onUserRegister",value:function(e){"ok"===e&&this.webSocketService.listAdmins(this.user.uuid,this.widget.uuid)}},{key:"onListUsers",value:function(e){this.toggleBackgroundElementActiveState(e),e||this.toggleUserIconElements(!1),this.toggleTopState(!e)}},{key:"onAdmin",value:function(e){""!==e.thumbnail&&(this.setIcon(e.thumbnail),this.toggleUserIconElements(!0))}},{key:"onCallRejected",value:function(){this.toggleTopState(!0)}},{key:"toggleUserIconElements",value:function(e){document.querySelector(".widget-outlook__alert").classList.toggle("js-active",e)}},{key:"toggleBackgroundElementActiveState",value:function(e){document.querySelector(".widget-outlook__background-circle").classList.toggle("js-active",e)}},{key:"setIcon",value:function(e){this.uiGet(".widget-outlook__admin-thumbnail").style.backgroundImage="url(".concat(this.service.consoleAppUrl,"/media/").concat(e,")"),this.emit("setThumbnail",e)}},{key:"toggleTopState",value:function(e){"false"===f.HTMLUtils.getCookie("qh_bottom_bar")&&(e=!1),this.isTopState=e,e?this.element.classList.add("js-top"):this.element.classList.remove("js-top")}},{key:"setCallRequestIcon",value:function(){this.uiGet(".widget-outlook__icon img").src="".concat(this.service.consoleAppUrl,"/static/images/call-request.svg")}},{key:"setCallAcceptedIcon",value:function(){this.uiGet(".widget-outlook__icon img").src="".concat(this.service.consoleAppUrl,"/static/images/call-accepted.svg")}}]),a}(d.UIView)},"./js/com/quickhellou/widget/WidgetBottomBarView.js":function(e,t,n){"use strict";n.r(t),n.d(t,{WidgetBottomBarView:function(){return m}});var r=n("../../node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js"),i=n("../../node_modules/@babel/runtime/helpers/esm/classCallCheck.js"),o=n("../../node_modules/@babel/runtime/helpers/esm/createClass.js"),s=n("../../node_modules/@babel/runtime/helpers/esm/inherits.js"),a=n("../../node_modules/@babel/runtime/helpers/esm/possibleConstructorReturn.js"),u=n("../../node_modules/@babel/runtime/helpers/esm/getPrototypeOf.js"),c=n("../../node_modules/@babel/runtime/regenerator/index.js"),l=n.n(c),d=n("./js/com/genb/base/controller/UIView.js"),f=n("./js/com/genb/base/utils/HTMLUtils.js");function h(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=(0,u.default)(e);if(t){var i=(0,u.default)(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return(0,a.default)(this,n)}}var m=function(e){(0,s.default)(a,e);var t,n=h(a);function a(e){var t;return(0,i.default)(this,a),(t=n.call(this)).service=e,t.isExpanded=!1,t.element=window.parent.document.getElementById("qh_b_frame"),t}return(0,o.default)(a,[{key:"init",value:(t=(0,r.default)(l().mark((function e(){var t=this;return l().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:this.uiGet(".widget-bottom__button--mute").addEventListener("click",(function(){t.collapseView(),t.disable()})),this.uiGet(".widget-bottom__button--yes").addEventListener("click",(function(){t.collapseView(),t.emit("expandExtView")})),this.uiGet(".widget-bottom__button--no").addEventListener("click",(function(){t.collapseView(),t.disable()})),this.service.addListener("callRejected",(function(){t.onCallRejected()})),this.service.addListener("listUsers",(function(e){t.onListUsers(e.length>0)})),this.service.addListener("error",(function(e){t.onError(e)}));case 9:case"end":return e.stop()}}),e,this)}))),function(){return t.apply(this,arguments)})},{key:"onCallRejected",value:function(){this.expandView()}},{key:"onListUsers",value:function(e){e?this.collapseView():this.expandView(),this.handleDesciptionsOnOperatorListChange(e)}},{key:"handleDesciptionsOnOperatorListChange",value:function(e){this.uiGet(".qh_widget-bottom__msg--no-operators").classList.toggle("js-active",!e),this.uiGet(".qh_widget-bottom__msg--lines").classList.toggle("js-active",e)}},{key:"onError",value:function(){this.uiGet(".qh_widget-bottom__content").classList.add("js-hidden"),this.uiGet(".widget-bottom__error").classList.remove("js-hidden"),this.expandView()}},{key:"toggleView",value:function(){this.isExpanded?this.collapseView():this.expandView()}},{key:"expandView",value:function(){this.isEnabled()&&(this.isExpanded=!0,this.element.classList.add("js-active"))}},{key:"collapseView",value:function(){this.isExpanded=!1,this.element.classList.remove("js-active"),this.emit("toggleBadgeTopState",!1)}},{key:"disable",value:function(){f.HTMLUtils.setCookie("qh_bottom_bar",!1)}},{key:"isEnabled",value:function(){return"false"!==f.HTMLUtils.getCookie("qh_bottom_bar")}}]),a}(d.UIView)},"./js/com/quickhellou/widget/WidgetExtensionView.js":function(e,t,n){"use strict";n.r(t),n.d(t,{WidgetExtensionView:function(){return m}});var r=n("../../node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js"),i=n("../../node_modules/@babel/runtime/helpers/esm/classCallCheck.js"),o=n("../../node_modules/@babel/runtime/helpers/esm/createClass.js"),s=n("../../node_modules/@babel/runtime/helpers/esm/inherits.js"),a=n("../../node_modules/@babel/runtime/helpers/esm/possibleConstructorReturn.js"),u=n("../../node_modules/@babel/runtime/helpers/esm/getPrototypeOf.js"),c=n("../../node_modules/@babel/runtime/regenerator/index.js"),l=n.n(c),d=n("./js/com/genb/base/controller/UIView.js"),f=n("./js/com/genb/base/utils/HTMLUtils.js");function h(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=(0,u.default)(e);if(t){var i=(0,u.default)(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return(0,a.default)(this,n)}}var m=function(e){(0,s.default)(a,e);var t,n=h(a);function a(e){var t;return(0,i.default)(this,a),(t=n.call(this)).service=e,t.element=t.uiGet("#qh_e_frame"),t.isExpanded=!1,t.videoMode=!1,t.anyOperatorActive=!1,t}return(0,o.default)(a,[{key:"init",value:(t=(0,r.default)(l().mark((function e(){var t,n=this;return l().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:this.service.addListener("admin",(function(e){n.onAdmin(e)})),this.service.addListener("listUsers",(function(e){n.anyOperatorActive=!!e.length,n.updateVideoCallUi()})),this.service.addListener("callAccepted",(function(e){n.onCallAccepted(e)})),this.service.addListener("callRejected",(function(){n.onCallRejected()})),this.service.addListener("videochatSessionClose",(function(){n.onHangUpVideoChat()})),(t=this.uiArray(".qh_rate-star")).forEach((function(e,r){e.addEventListener("click",(function(){for(var e=1;e<=t.length;e++){var i=n.uiGet(".qh_rate-star:nth-child(".concat(e,")"));i.classList.remove("js-enabled,js-disabled"),e<=r+1?(i.classList.add("js-enabled"),i.classList.remove("js-disabled")):(i.classList.remove("js-enabled"),i.classList.add("js-disabled"))}n.service.rateComSession(r+1)}))})),this.initContactForm();case 8:case"end":return e.stop()}}),e,this)}))),function(){return t.apply(this,arguments)})},{key:"initContactForm",value:function(){var e=this,t=".widget-extension__button--send";this.uiExists(t)&&(f.HTMLUtils.removeAllEventListeners(t),this.uiGet(t).addEventListener("click",(function(){e.sendContactForm()})));this.initInactiveOperatorCloser()}},{key:"initStartVideoChatForm",value:function(){var e=this,t=".widget-extension__button--video-call";this.uiExists(t)&&(f.HTMLUtils.removeAllEventListeners(t),this.uiGet(t).addEventListener("click",(function(){return e.sendStartVideoChatForm()})));this.initActiveOperatorFormCloser()}},{key:"initActiveOperatorFormCloser",value:function(){var e=this,t=".qh_widget-closer--active-operator-form";this.uiExists(t)&&(f.HTMLUtils.removeAllEventListeners(t),this.uiGet(t).addEventListener("click",(function(){e.collapseAndReinitActiveOperatorInitForm(!1)})))}},{key:"initRateUXCloser",value:function(){var e=this,t=".qh_widget-closer--rate-ux";this.uiExists(t)&&(f.HTMLUtils.removeAllEventListeners(t),this.uiGet(t).addEventListener("click",(function(){e.collapseAndReinitActiveOperatorInitForm()})))}},{key:"initAwaitVideoCallCloser",value:function(){var e=this,t=".qh_widget-closer--await-video-call";this.uiExists(t)&&(f.HTMLUtils.removeAllEventListeners(t),this.uiGet(t).addEventListener("click",(function(){e.cancelCall()})))}},{key:"initVideoCloser",value:function(){var e=this,t=".qh_widget-closer--video";this.uiExists(t)&&(f.HTMLUtils.removeAllEventListeners(t),this.uiGet(t).addEventListener("click",(function(){e.onHangUpVideoChat()})))}},{key:"initInactiveOperatorCloser",value:function(){var e=this;this.uiExists(".qh_widget-closer--inactive-operator")&&(f.HTMLUtils.removeAllEventListeners(".qh_widget-closer--inactive-operator"),this.uiGet(".qh_widget-closer--inactive-operator").addEventListener("click",(function(){e.collapseAndReinitInactiveOperatorInitForm()})))}},{key:"collapseAndReinitActiveOperatorInitForm",value:function(){var e=this,t=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];this.deactivateVideoMode(),this.service.getActiveOperatorInitForm().then((function(n){document.querySelector(".qh_video-ui_replace").innerHTML=n,e.activateActiveOperatorInitForm(),e.collapseView(),t&&e.service.destroyVideoChatApp()}))}},{key:"collapseAndReinitInactiveOperatorInitForm",value:function(){var e=this;this.service.getInactiveOperatorInitForm().then((function(t){document.querySelector(".contact-form").innerHTML=t,e.initContactForm(),e.collapseView()}))}},{key:"sendContactForm",value:function(){var e=this,t={name:document.querySelector(".qh_module--inactive-form input[name=name]").value,email_or_phone:document.querySelector(".qh_module--inactive-form input[name=email_or_phone]").value,message:document.querySelector("textarea[name=message]").value};this.service.sendContactForm(t).then((function(t){document.querySelector(".contact-form").innerHTML=t,e.initContactForm()})).catch((function(e){console.log("reason",e)}))}},{key:"sendStartVideoChatForm",value:function(){var e=this,t={name:document.querySelector(".qh_active-user-form__input[name=name]").value,email_or_phone:document.querySelector(".qh_active-user-form__input[name=email_or_phone]").value};this.service.sendStartVideoChatForm(t).then((function(t){document.querySelector(".qh_video-ui_replace").innerHTML=t;var n=e.uiGet(".qh_com-status"),r=n.dataset.status,i=n.dataset.userid;e.service.setUserId(i),"ok"===r?(e.requestCall(),e.initAwaitVideoCallCloser()):e.initStartVideoChatForm()})).catch((function(e){console.log("reason",e)}))}},{key:"onAdmin",value:function(e){this.adminUser=e;var t=this.uiGet(".active-user__admin-name"),n=e.full_name.split(" ")[0];t.innerHTML=n}},{key:"setThumbnails",value:function(e){var t=this;this.uiArray(".active-user-form__thumbnail").forEach((function(n){n.style.backgroundImage="url(".concat(t.service.consoleAppUrl,"/media/").concat(e,")")}))}},{key:"toggleView",value:function(){this.isExpanded?this.collapseView():this.expandView()}},{key:"expandView",value:function(){this.isExpanded=!0,this.element.classList.add("js-expanded")}},{key:"collapseView",value:function(){this.isExpanded=!1,this.element.classList.remove("js-expanded"),this.deactivateVideoMode()}},{key:"updateVideoCallUi",value:function(){this.uiGet(".qh_module--active-operator").classList.toggle("js-enabled",this.anyOperatorActive),this.uiGet(".qh_module--inactive-form").classList.toggle("js-enabled",!this.anyOperatorActive),this.anyOperatorActive?this.videoMode||(this.activateActiveOperatorInitForm(),this.emit("collapse")):this.activateCallDefaultStage()}},{key:"requestCall",value:function(){this.service.requestCall()}},{key:"cancelCall",value:function(){this.service.cancelCall(),this.anyOperatorActive?this.videoMode||this.collapseAndReinitActiveOperatorInitForm(!1):this.activateCallDefaultStage()}},{key:"onCallAccepted",value:function(e){this.uiGet("meta[name=room_id]").setAttribute("content",e),this.activateVideoChat()}},{key:"deleteRoomId",value:function(){this.uiGet("meta[name=room_id]").setAttribute("content","")}},{key:"onCallRejected",value:function(){this.activateCallRejectedStage()}},{key:"activateCallRejectedStage",value:function(){var e=this.uiGet(".qh_video-ui_awating--line1");e.classList.add("qh_tight"),e.innerHTML="Sorry, all of our operators are busy, we will email you shortly!",this.uiGet(".qh_video-ui_awating--line2").remove()}},{key:"activateCallDefaultStage",value:function(){this.deactivateAllStages(),this.uiGet(".qh_module--inactive-form").classList.add("js-enabled"),this.deactivateVideoMode()}},{key:"activateActiveOperatorInitForm",value:function(){this.deactivateAllStages(),this.uiGet(".qh_submodule--init-form").classList.add("js-enabled"),this.initStartVideoChatForm()}},{key:"activateRateUxForm",value:function(){this.deactivateAllStages(),this.uiGet(".qh_submodule--rate-ux").classList.add("js-enabled"),this.initRateUXCloser()}},{key:"activateVideoChat",value:function(){var e=this;this.deactivateAllStages(),this.uiGet(".qh_submodule--video-chat").classList.add("js-enabled"),this.activateVideoMode(),this.uiGet(".confirm-join-button").addEventListener("click",(function(){e.onJoinVideoChat()})),this.uiGet(".button--hangup").addEventListener("click",(function(){e.onHangUpVideoChat()})),this.initVideoCloser()}},{key:"onJoinVideoChat",value:function(){}},{key:"onHangUpVideoChat",value:function(){this.activateRateUxForm(),this.activateVideoMode(),this.deleteRoomId()}},{key:"deactivateAllStages",value:function(){this.uiArray(".qh_submodule").forEach((function(e){e.classList.remove("js-enabled")})),this.deactivateVideoMode()}},{key:"activateVideoMode",value:function(){this.element.classList.add("qh_video-mode"),this.videoMode=!0}},{key:"deactivateVideoMode",value:function(){this.element.classList.remove("qh_video-mode"),this.videoMode=!1}}]),a}(d.UIView)},"./js/com/quickhellou/widget/WidgetService.js":function(e,t,n){"use strict";n.r(t),n.d(t,{WidgetService:function(){return y}});var r=n("../../node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js"),i=n("../../node_modules/@babel/runtime/helpers/esm/classCallCheck.js"),o=n("../../node_modules/@babel/runtime/helpers/esm/createClass.js"),s=n("../../node_modules/@babel/runtime/helpers/esm/inherits.js"),a=n("../../node_modules/@babel/runtime/helpers/esm/possibleConstructorReturn.js"),u=n("../../node_modules/@babel/runtime/helpers/esm/getPrototypeOf.js"),c=n("../../node_modules/@babel/runtime/regenerator/index.js"),l=n.n(c),d=n("./js/com/genb/base/service/EventEmitter.js"),f=n("./js/com/quickhellou/base/services/WebSocketService.js"),h=n("./js/com/quickhellou/base/services/ApiService.js"),m=n("./js/com/quickhellou/base/model/ApplicationSettings.js"),p=n("./js/com/quickhellou/base/utils/QhUtils.js");function v(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=(0,u.default)(e);if(t){var i=(0,u.default)(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return(0,a.default)(this,n)}}var y=function(e){(0,s.default)(g,e);var t,n,a,u,c,d,y,b=v(g);function g(e,t){var n;return(0,i.default)(this,g),(n=b.call(this)).apiService=new h.ApiService(e),n.consoleAppUrl=e,n.widgetId=t,n.users=[],n}return(0,o.default)(g,[{key:"init",value:(y=(0,r.default)(l().mark((function e(){var t=this;return l().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",new Promise((function(e,n){t.apiService.getSettings().then((function(r){t.appSettings=new m.ApplicationSettings(r);try{t.apiService.getWidgetById(t.widgetId).then((function(r){t.widget=JSON.parse(r),t.install().then((function(r){var i=JSON.parse(r);"failure"===i.status&&n(i.result),t.webSocketService=new f.WebSocketService(t.appSettings.webSocketServiceUrl),t.webSocketService.addListener("register",(function(e){t.onUserRegister(e)})),t.webSocketService.addListener("listUsers",(function(e){t.onListUsers(e)})),t.webSocketService.addListener("callAccepted",(function(e){t.onCallAccepted(e)})),t.webSocketService.addListener("callRejected",(function(){t.onCallRejected()})),t.webSocketService.addListener("error",(function(e){t.emit("error",e)})),t.webSocketService.addListener("communicationRecord",(function(e){t.onCommunicationRecord(e)})),t.user={uuid:"guest_"+String(Math.floor(Date.now()/1e3)),roomId:t.widget.uuid},t.webSocketService.registerGuest(t.user.uuid,t.widget.uuid);try{t.videochatProxy=videochat.proxy(),t.videochatProxy.addEventListener("close",(function(){t.onCloseVideoChat()})),t.videochatProxy.addEventListener("remote_hangup",(function(){t.onCloseVideoChat()}))}catch(e){console.log("Videochat is not defined.")}e()}))}))}catch(e){console.log(e)}}))})));case 1:case"end":return e.stop()}}),e)}))),function(){return y.apply(this,arguments)})},{key:"destroyVideoChatApp",value:function(){try{this.videochatProxy.destroy()}catch(e){console.log("e",e)}}},{key:"onCloseVideoChat",value:function(){this.emit("videochatSessionClose")}},{key:"requestCall",value:function(){var e=this.admins[0];this.webSocketService.requestCall(this.user.uuid,this.user.userId,e,this.widget.uuid)}},{key:"cancelCall",value:function(){var e=this.admins[0];this.webSocketService.cancelCall(this.sessionRecord.id,this.user.userId,e,this.widget.uuid)}},{key:"onUserRegister",value:function(e){"ok"===e&&this.webSocketService.listAdmins(this.user.uuid,this.widget.uuid)}},{key:"onListUsers",value:function(e){var t=this;if(this.admins=e,this.emit("listUsers",e),e.length){var n=p.QhUtils.extractUserId(e[0]);this.getUser(n).then((function(e){t.emit("admin",e)}))}}},{key:"onCallAccepted",value:(d=(0,r.default)(l().mark((function e(t){return l().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:this.emit("callAccepted",t);case 1:case"end":return e.stop()}}),e,this)}))),function(e){return d.apply(this,arguments)})},{key:"onCallRejected",value:function(){this.emit("callRejected")}},{key:"onCommunicationRecord",value:function(e){this.sessionRecord=e}},{key:"sendContactForm",value:function(e){var t="".concat(this.consoleAppUrl,"/dashboard/widget_extension_embed/").concat(this.widgetId,"/").concat(encodeURIComponent(window.location.hostname.toLowerCase()),"/").concat(this.widget.uuid);return this.apiService.postAsXMLHttpRequest(e,t)}},{key:"sendStartVideoChatForm",value:function(e){var t="".concat(this.consoleAppUrl,"/dashboard/widget_active_operator/").concat(this.widgetId,"/").concat(encodeURIComponent(window.location.hostname.toLowerCase()),"/").concat(this.widget.uuid);return this.apiService.postAsXMLHttpRequest(e,t)}},{key:"install",value:(c=(0,r.default)(l().mark((function e(){var t;return l().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t="".concat(this.consoleAppUrl,"/dashboard/install/").concat(this.widgetId,"/").concat(encodeURIComponent(window.location.hostname.toLowerCase()),"/").concat(this.widget.uuid),e.abrupt("return",this.apiService.postAsXMLHttpRequest({},t));case 2:case"end":return e.stop()}}),e,this)}))),function(){return c.apply(this,arguments)})},{key:"getUser",value:(u=(0,r.default)(l().mark((function e(t){var n;return l().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.apiService.getUserById(t);case 2:return n=e.sent,e.abrupt("return",JSON.parse(n));case 4:case"end":return e.stop()}}),e,this)}))),function(e){return u.apply(this,arguments)})},{key:"rateComSession",value:(a=(0,r.default)(l().mark((function e(t){var n;return l().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.apiService.rateComSession(this.sessionRecord.id,t);case 2:return n=e.sent,e.abrupt("return",JSON.parse(n));case 4:case"end":return e.stop()}}),e,this)}))),function(e){return a.apply(this,arguments)})},{key:"setUserId",value:function(e){this.user.userId=e}},{key:"getActiveOperatorInitForm",value:(n=(0,r.default)(l().mark((function e(){return l().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.apiService.getAsXMLHttpRequest("".concat(this.consoleAppUrl,"/dashboard/active_operator_init_form"));case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e,this)}))),function(){return n.apply(this,arguments)})},{key:"getInactiveOperatorInitForm",value:(t=(0,r.default)(l().mark((function e(){return l().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.apiService.getAsXMLHttpRequest("".concat(this.consoleAppUrl,"/dashboard/inactive_operator_init_form"));case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e,this)}))),function(){return t.apply(this,arguments)})}]),g}(d.EventEmitter)},"../../node_modules/js-cookie/src/js.cookie.js":function(e,t,n){var r,i;!function(o){if(void 0===(i="function"==typeof(r=o)?r.call(t,n,t,e):r)||(e.exports=i),!0,e.exports=o(),!!0){var s=window.Cookies,a=window.Cookies=o();a.noConflict=function(){return window.Cookies=s,a}}}((function(){function e(){for(var e=0,t={};e<arguments.length;e++){var n=arguments[e];for(var r in n)t[r]=n[r]}return t}function t(e){return e.replace(/(%[0-9A-Z]{2})+/g,decodeURIComponent)}return function n(r){function i(){}function o(t,n,o){if("undefined"!=typeof document){"number"==typeof(o=e({path:"/"},i.defaults,o)).expires&&(o.expires=new Date(1*new Date+864e5*o.expires)),o.expires=o.expires?o.expires.toUTCString():"";try{var s=JSON.stringify(n);/^[\{\[]/.test(s)&&(n=s)}catch(e){}n=r.write?r.write(n,t):encodeURIComponent(String(n)).replace(/%(23|24|26|2B|3A|3C|3E|3D|2F|3F|40|5B|5D|5E|60|7B|7D|7C)/g,decodeURIComponent),t=encodeURIComponent(String(t)).replace(/%(23|24|26|2B|5E|60|7C)/g,decodeURIComponent).replace(/[\(\)]/g,escape);var a="";for(var u in o)o[u]&&(a+="; "+u,!0!==o[u]&&(a+="="+o[u].split(";")[0]));return document.cookie=t+"="+n+a}}function s(e,n){if("undefined"!=typeof document){for(var i={},o=document.cookie?document.cookie.split("; "):[],s=0;s<o.length;s++){var a=o[s].split("="),u=a.slice(1).join("=");n||'"'!==u.charAt(0)||(u=u.slice(1,-1));try{var c=t(a[0]);if(u=(r.read||r)(u,c)||t(u),n)try{u=JSON.parse(u)}catch(e){}if(i[c]=u,e===c)break}catch(e){}}return e?i[e]:i}}return i.set=o,i.get=function(e){return s(e,!1)},i.getJSON=function(e){return s(e,!0)},i.remove=function(t,n){o(t,"",e(n,{expires:-1}))},i.defaults={},i.withConverter=n,i}((function(){}))}))},"../../node_modules/regenerator-runtime/runtime.js":function(e){var t=function(e){"use strict";var t,n=Object.prototype,r=n.hasOwnProperty,i="function"==typeof Symbol?Symbol:{},o=i.iterator||"@@iterator",s=i.asyncIterator||"@@asyncIterator",a=i.toStringTag||"@@toStringTag";function u(e,t,n){return Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{u({},"")}catch(e){u=function(e,t,n){return e[t]=n}}function c(e,t,n,r){var i=t&&t.prototype instanceof v?t:v,o=Object.create(i.prototype),s=new A(r||[]);return o._invoke=function(e,t,n){var r=d;return function(i,o){if(r===h)throw new Error("Generator is already running");if(r===m){if("throw"===i)throw o;return R()}for(n.method=i,n.arg=o;;){var s=n.delegate;if(s){var a=w(s,n);if(a){if(a===p)continue;return a}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if(r===d)throw r=m,n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);r=h;var u=l(e,t,n);if("normal"===u.type){if(r=n.done?m:f,u.arg===p)continue;return{value:u.arg,done:n.done}}"throw"===u.type&&(r=m,n.method="throw",n.arg=u.arg)}}}(e,n,s),o}function l(e,t,n){try{return{type:"normal",arg:e.call(t,n)}}catch(e){return{type:"throw",arg:e}}}e.wrap=c;var d="suspendedStart",f="suspendedYield",h="executing",m="completed",p={};function v(){}function y(){}function b(){}var g={};u(g,o,(function(){return this}));var k=Object.getPrototypeOf,_=k&&k(k(U([])));_&&_!==n&&r.call(_,o)&&(g=_);var S=b.prototype=v.prototype=Object.create(g);function C(e){["next","throw","return"].forEach((function(t){u(e,t,(function(e){return this._invoke(t,e)}))}))}function j(e,t){function n(i,o,s,a){var u=l(e[i],e,o);if("throw"!==u.type){var c=u.arg,d=c.value;return d&&"object"==typeof d&&r.call(d,"__await")?t.resolve(d.__await).then((function(e){n("next",e,s,a)}),(function(e){n("throw",e,s,a)})):t.resolve(d).then((function(e){c.value=e,s(c)}),(function(e){return n("throw",e,s,a)}))}a(u.arg)}var i;this._invoke=function(e,r){function o(){return new t((function(t,i){n(e,r,t,i)}))}return i=i?i.then(o,o):o()}}function w(e,n){var r=e.iterator[n.method];if(r===t){if(n.delegate=null,"throw"===n.method){if(e.iterator.return&&(n.method="return",n.arg=t,w(e,n),"throw"===n.method))return p;n.method="throw",n.arg=new TypeError("The iterator does not provide a 'throw' method")}return p}var i=l(r,e.iterator,n.arg);if("throw"===i.type)return n.method="throw",n.arg=i.arg,n.delegate=null,p;var o=i.arg;return o?o.done?(n[e.resultName]=o.value,n.next=e.nextLoc,"return"!==n.method&&(n.method="next",n.arg=t),n.delegate=null,p):o:(n.method="throw",n.arg=new TypeError("iterator result is not an object"),n.delegate=null,p)}function L(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function E(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function A(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(L,this),this.reset(!0)}function U(e){if(e){var n=e[o];if(n)return n.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var i=-1,s=function n(){for(;++i<e.length;)if(r.call(e,i))return n.value=e[i],n.done=!1,n;return n.value=t,n.done=!0,n};return s.next=s}}return{next:R}}function R(){return{value:t,done:!0}}return y.prototype=b,u(S,"constructor",b),u(b,"constructor",y),y.displayName=u(b,a,"GeneratorFunction"),e.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===y||"GeneratorFunction"===(t.displayName||t.name))},e.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,b):(e.__proto__=b,u(e,a,"GeneratorFunction")),e.prototype=Object.create(S),e},e.awrap=function(e){return{__await:e}},C(j.prototype),u(j.prototype,s,(function(){return this})),e.AsyncIterator=j,e.async=function(t,n,r,i,o){void 0===o&&(o=Promise);var s=new j(c(t,n,r,i),o);return e.isGeneratorFunction(n)?s:s.next().then((function(e){return e.done?e.value:s.next()}))},C(S),u(S,a,"Generator"),u(S,o,(function(){return this})),u(S,"toString",(function(){return"[object Generator]"})),e.keys=function(e){var t=[];for(var n in e)t.push(n);return t.reverse(),function n(){for(;t.length;){var r=t.pop();if(r in e)return n.value=r,n.done=!1,n}return n.done=!0,n}},e.values=U,A.prototype={constructor:A,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=t,this.done=!1,this.delegate=null,this.method="next",this.arg=t,this.tryEntries.forEach(E),!e)for(var n in this)"t"===n.charAt(0)&&r.call(this,n)&&!isNaN(+n.slice(1))&&(this[n]=t)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var n=this;function i(r,i){return a.type="throw",a.arg=e,n.next=r,i&&(n.method="next",n.arg=t),!!i}for(var o=this.tryEntries.length-1;o>=0;--o){var s=this.tryEntries[o],a=s.completion;if("root"===s.tryLoc)return i("end");if(s.tryLoc<=this.prev){var u=r.call(s,"catchLoc"),c=r.call(s,"finallyLoc");if(u&&c){if(this.prev<s.catchLoc)return i(s.catchLoc,!0);if(this.prev<s.finallyLoc)return i(s.finallyLoc)}else if(u){if(this.prev<s.catchLoc)return i(s.catchLoc,!0)}else{if(!c)throw new Error("try statement without catch or finally");if(this.prev<s.finallyLoc)return i(s.finallyLoc)}}}},abrupt:function(e,t){for(var n=this.tryEntries.length-1;n>=0;--n){var i=this.tryEntries[n];if(i.tryLoc<=this.prev&&r.call(i,"finallyLoc")&&this.prev<i.finallyLoc){var o=i;break}}o&&("break"===e||"continue"===e)&&o.tryLoc<=t&&t<=o.finallyLoc&&(o=null);var s=o?o.completion:{};return s.type=e,s.arg=t,o?(this.method="next",this.next=o.finallyLoc,p):this.complete(s)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),p},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.finallyLoc===e)return this.complete(n.completion,n.afterLoc),E(n),p}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.tryLoc===e){var r=n.completion;if("throw"===r.type){var i=r.arg;E(n)}return i}}throw new Error("illegal catch attempt")},delegateYield:function(e,n,r){return this.delegate={iterator:U(e),resultName:n,nextLoc:r},"next"===this.method&&(this.arg=t),p}},e}(e.exports);try{regeneratorRuntime=t}catch(e){"object"==typeof globalThis?globalThis.regeneratorRuntime=t:Function("r","regeneratorRuntime = r")(t)}},"../../node_modules/@babel/runtime/helpers/esm/arrayLikeToArray.js":function(e,t,n){"use strict";function r(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}n.r(t),n.d(t,{default:function(){return r}})},"../../node_modules/@babel/runtime/helpers/esm/arrayWithHoles.js":function(e,t,n){"use strict";function r(e){if(Array.isArray(e))return e}n.r(t),n.d(t,{default:function(){return r}})},"../../node_modules/@babel/runtime/helpers/esm/assertThisInitialized.js":function(e,t,n){"use strict";function r(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}n.r(t),n.d(t,{default:function(){return r}})},"../../node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js":function(e,t,n){"use strict";function r(e,t,n,r,i,o,s){try{var a=e[o](s),u=a.value}catch(e){return void n(e)}a.done?t(u):Promise.resolve(u).then(r,i)}function i(e){return function(){var t=this,n=arguments;return new Promise((function(i,o){var s=e.apply(t,n);function a(e){r(s,i,o,a,u,"next",e)}function u(e){r(s,i,o,a,u,"throw",e)}a(void 0)}))}}n.r(t),n.d(t,{default:function(){return i}})},"../../node_modules/@babel/runtime/helpers/esm/classCallCheck.js":function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}n.r(t),n.d(t,{default:function(){return r}})},"../../node_modules/@babel/runtime/helpers/esm/createClass.js":function(e,t,n){"use strict";function r(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function i(e,t,n){return t&&r(e.prototype,t),n&&r(e,n),e}n.r(t),n.d(t,{default:function(){return i}})},"../../node_modules/@babel/runtime/helpers/esm/defineProperty.js":function(e,t,n){"use strict";function r(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}n.r(t),n.d(t,{default:function(){return r}})},"../../node_modules/@babel/runtime/helpers/esm/getPrototypeOf.js":function(e,t,n){"use strict";function r(e){return r=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},r(e)}n.r(t),n.d(t,{default:function(){return r}})},"../../node_modules/@babel/runtime/helpers/esm/inherits.js":function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return i}});var r=n("../../node_modules/@babel/runtime/helpers/esm/setPrototypeOf.js");function i(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&(0,r.default)(e,t)}},"../../node_modules/@babel/runtime/helpers/esm/iterableToArrayLimit.js":function(e,t,n){"use strict";function r(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,i,o=[],s=!0,a=!1;try{for(n=n.call(e);!(s=(r=n.next()).done)&&(o.push(r.value),!t||o.length!==t);s=!0);}catch(e){a=!0,i=e}finally{try{s||null==n.return||n.return()}finally{if(a)throw i}}return o}}n.r(t),n.d(t,{default:function(){return r}})},"../../node_modules/@babel/runtime/helpers/esm/nonIterableRest.js":function(e,t,n){"use strict";function r(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}n.r(t),n.d(t,{default:function(){return r}})},"../../node_modules/@babel/runtime/helpers/esm/possibleConstructorReturn.js":function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return o}});var r=n("../../node_modules/@babel/runtime/helpers/esm/typeof.js"),i=n("../../node_modules/@babel/runtime/helpers/esm/assertThisInitialized.js");function o(e,t){if(t&&("object"===(0,r.default)(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return(0,i.default)(e)}},"../../node_modules/@babel/runtime/helpers/esm/setPrototypeOf.js":function(e,t,n){"use strict";function r(e,t){return r=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},r(e,t)}n.r(t),n.d(t,{default:function(){return r}})},"../../node_modules/@babel/runtime/helpers/esm/slicedToArray.js":function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return a}});var r=n("../../node_modules/@babel/runtime/helpers/esm/arrayWithHoles.js"),i=n("../../node_modules/@babel/runtime/helpers/esm/iterableToArrayLimit.js"),o=n("../../node_modules/@babel/runtime/helpers/esm/unsupportedIterableToArray.js"),s=n("../../node_modules/@babel/runtime/helpers/esm/nonIterableRest.js");function a(e,t){return(0,r.default)(e)||(0,i.default)(e,t)||(0,o.default)(e,t)||(0,s.default)()}},"../../node_modules/@babel/runtime/helpers/esm/typeof.js":function(e,t,n){"use strict";function r(e){return r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},r(e)}n.r(t),n.d(t,{default:function(){return r}})},"../../node_modules/@babel/runtime/helpers/esm/unsupportedIterableToArray.js":function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return i}});var r=n("../../node_modules/@babel/runtime/helpers/esm/arrayLikeToArray.js");function i(e,t){if(e){if("string"==typeof e)return(0,r.default)(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?(0,r.default)(e,t):void 0}}}},t={};function n(r){var i=t[r];if(void 0!==i)return i.exports;var o=t[r]={exports:{}};return e[r](o,o.exports,n),o.exports}n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,{a:t}),t},n.d=function(e,t){for(var r in t)n.o(t,r)&&!n.o(e,r)&&Object.defineProperty(e,r,{enumerable:!0,get:t[r]})},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})};var r={};!function(){"use strict";n.r(r);var e=n("./js/com/quickhellou/widget/WidgetService.js"),t=n("./js/com/quickhellou/widget/BadgeView.js"),i=n("./js/com/quickhellou/widget/WidgetExtensionView.js"),o=n("./js/com/quickhellou/widget/WidgetBottomBarView.js"),s=document.querySelector(".qh-root").dataset.url,a=document.querySelector(".qh-root").dataset.id,u=new e.WidgetService(s,a);u.init().then((function(){var e=new t.BadgeView(u),n=new i.WidgetExtensionView(u),r=new o.WidgetBottomBarView(u);n.addListener("collapse",(function(){r.collapseView()})),e.addListener("collapse",(function(){n.toggleView(),r.collapseView()})),e.addListener("setThumbnail",(function(e){n.setThumbnails(e)})),r.addListener("toggleBadgeTopState",(function(t){e.toggleTopState(t)})),r.addListener("expandExtView",(function(){n.expandView()})),e.init(),n.init(),r.init(),document.querySelector(".qh-root").classList.add("active")})).catch((function(e){document.querySelector(".qh-root").style.opacity=1,document.querySelector(".qh-root").innerHTML=e}))}()}();
//# sourceMappingURL=widget.js.map